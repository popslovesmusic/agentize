{
                'agent': 'librarian',
                'mode': 'search',
                'omega_surface': omega_state.metadata.get('constraint_surface'),
                'polarity': polarity
            }