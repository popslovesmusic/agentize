{
  "mbc_version": "4.0",
  "layer": "psi-semantic-wave",
  "description": "MBC-4.0 ψ-layer: semantic wave operator built from μ-weighted δ-Laplacian plus Φ and Π.",
  "operators": {
    "delta": {
      "id": "δ",
      "type": "deviation_geometry",
      "role": "base_metric"
    },
    "mu": {
      "id": "μ",
      "type": "local_measure",
      "role": "adjacency_weighting"
    },
    "phi": {
      "id": "Φ",
      "type": "semantic_projection",
      "role": "form_potential"
    },
    "pi": {
      "id": "Π",
      "type": "causal_evaluation",
      "role": "truth_potential"
    },
    "delta_mu_laplacian": {
      "id": "Δ_{δ,μ}",
      "type": "weighted_laplacian",
      "definition": "Δ_{δ,μ} B[i] = sum_j w_ij * delta[i][j] * (B[j] - B[i])",
      "dependencies": ["δ", "μ"]
    },
    "psi": {
      "id": "ψ",
      "type": "semantic_wave_operator",
      "definition": "ψ(B)[i] = Δ_{δ,μ} B[i] - Φ(B)[i] + Π(B)[i]",
      "dependencies": ["Δ_{δ,μ}", "Φ", "Π"],
      "order": 2,
      "linearity": {
        "in_B": true,
        "in_parameters": true
      }
    }
  },
  "definitions": {
    "delta_mu_laplacian": "Delta_delta_mu[i] = sum_j W[i][j] * Delta[i][j] * (B[j] - B[i])",
    "phi_potential": "V_phi[i] = -Phi(B)[i]",
    "pi_potential": "V_pi[i] = Pi(B)[i]",
    "psi_operator": "psi[i] = Delta_delta_mu[i] + V_phi[i] + V_pi[i]"
  },
  "constraints": {
    "mu_normalization": "forall i: abs(sum_j W[i][j] - 1.0) < 1e-12",
    "mu_nonnegativity": "forall i,j: W[i][j] >= 0",
    "delta_symmetry": "forall i,j: Delta[i][j] = Delta[j][i]",
    "delta_zero_diagonal": "forall i: Delta[i][i] = 0",
    "phi_linearity": "Phi is linear over Box-space",
    "pi_linearity": "Pi is linear over Box-space or piecewise-linear by region",
    "psi_linearity": "psi is linear as composition of linear operators",
    "psi_covariance": "psi commutes with δ, Φ, Π, μ under Tri-Unity+μ axioms"
  },
  "wave_equation": {
    "semantic_wave_equation": "ψ(B) = 0",
    "interpretation": "B is in semantic wave equilibrium under weighted δ-geometry.",
    "evolution_form": {
      "propagator": "U_psi(t) = exp(t * ψ)",
      "time_evolution": "B(t) = U_psi(t) * B(0)"
    }
  },
  "io_signatures": {
    "input_box": {
      "shape": "N",
      "datatype": "float64 or higher",
      "description": "Box-valued field B[i] over micro-states i."
    },
    "output_box": {
      "shape": "N",
      "datatype": "float64 or higher",
      "description": "ψ(B)[i], semantic wave operator applied to B."
    }
  },
  "tests": {
    "flat_geometry_zero_potentials": {
      "description": "If δ is flat, μ is uniform, and Φ=Π=0, ψ reduces to a standard Laplacian.",
      "conditions": [
        "delta[i][j] = 0 for i=j; 1 for |i-j|=1; large for others",
        "W[i][j] uniform over neighbors",
        "Phi(B) = 0",
        "Pi(B) = 0"
      ],
      "assert": "psi(B) == Delta_delta_mu(B)"
    },
    "static_solution": {
      "description": "ψ(B) = 0 detects equilibrium configurations.",
      "assert": "if psi(B) == 0 then B is a semantic wave equilibrium"
    },
    "linearity_check": {
      "description": "ψ is linear",
      "assert": "psi(a*B1 + b*B2) == a*psi(B1) + b*psi(B2)"
    }
  }
}