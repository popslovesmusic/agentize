{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "MBC-4.0 Commutative Diagram",
  "type": "object",
  "required": ["diagram_id", "objects", "morphisms", "faces"],
  "properties": {
    "diagram_id": { "type": "string" },
    "dimension": { "type": "integer", "minimum": 2, "maximum": 4 },
    "objects": {
      "type": "object",
      "additionalProperties": {
        "type": "object",
        "required": ["label", "type"],
        "properties": {
          "label": { "type": "string" },
          "type": { "type": "string", "enum": ["Box", "Functor", "Transform", "Field"] }
        }
      }
    },
    "morphisms": {
      "type": "object",
      "additionalProperties": {
        "type": "object",
        "required": ["from", "to", "operator"],
        "properties": {
          "from": { "type": "string" },
          "to": { "type": "string" },
          "operator": { "type": "string" }
        }
      }
    },
    "faces": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["id", "morphism_path", "commutativity"],
        "properties": {
          "id": { "type": "string" },
          "morphism_path": { "type": "array", "items": { "type": "string" } },
          "commutativity": { "type": "string", "enum": ["strict", "up_to_natural_iso", "weak"] }
        }
      }
    }
  }
}